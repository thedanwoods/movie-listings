(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(75)},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),i=n.n(c),o=n(1),u=n(4),l=n(16),s=n(2),f={movies:[],genres:[],genreFilter:[],ratingFilter:3,fetchStatus:{fetchMovies:""}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.movies,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"MOVIES_RECEIVED":var n=t.movies.results.map(function(e){return e.id});return Object(s.a)(e.filter(function(e){return!n.includes(e.id)})).concat(Object(s.a)(t.movies.results));default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.genres,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GENRES_RECEIVED":return t.genres.genres;default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.genreFilter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHECKBOX_CLICKED":return e.includes(t.id)?e.filter(function(e){return e!==t.id}):Object(s.a)(e).concat([t.id]);default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.ratingFilter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"RATING_CLICKED":return+t.rating;default:return e}},E=n(8),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.fetchStatus;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case"FETCH_MOVIES_START":return Object(E.a)({},e,{fetchMovies:"LOADING"});case"FETCH_MOVIES_ERROR":return Object(E.a)({},e,{fetchMovies:"ERROR"});case"FETCH_MOVIES_SUCCESS":return Object(E.a)({},e,{fetchMovies:"SUCCESS"});default:return e}},p=Object(u.c)({movies:m,genres:g,genreFilter:d,ratingFilter:v,fetchStatus:h}),_=function(){return Object(u.d)(p,f,Object(u.a)(l.a))},b=n(17),O=n.n(b),y=(n(59),function(e){var t=e.movie,n=e.genres;return a.a.createElement("div",{className:"movie-card"},a.a.createElement("div",{className:"movie-card__poster-container"},a.a.createElement("img",{className:"movie-card__poster",src:"https://image.tmdb.org/t/p/w500".concat(t.poster_path),alt:"".concat(t.title," poster")})),a.a.createElement("section",{className:"movie-card__info"},a.a.createElement("h1",{className:"movie-card__title"},t.title),a.a.createElement("p",{className:"movie-card__genres"},n.length&&n.join(", "))))}),C=Object(o.b)(function(e,t){return{genres:e.genres.filter(function(e){return t.movie.genre_ids.includes(e.id)}).map(function(e){return e.name})}})(y),S=(n(61),function(e,t){return t.popularity-e.popularity}),N=function(e){var t=e.movies;return a.a.createElement(a.a.Fragment,null,t.length>0&&t.sort(S).map(function(e){return a.a.createElement(C,{key:e.id,movie:e})}),0===t.length&&a.a.createElement("div",{className:"movies__none"},"No matching movies found."))},j=function(e,t){return!!t.length&&t.every(function(t){return e.includes(t)})},w=function(e,t,n){return e.length?e.filter(function(e){return!t.length||j(e.genre_ids,t)}).filter(function(e){return e.vote_average>=n}):[]},R=Object(o.b)(function(e){return{movies:w(e.movies,e.genreFilter,e.ratingFilter)}})(N),F=(n(63),function(e){var t=e.genre,n=e.onClick,r=e.checked;return a.a.createElement("li",{className:"genre-filter-item"},a.a.createElement("label",{className:"genre-filter-item__checkbox",htmlFor:"genre-filter-".concat(t.name)},a.a.createElement("input",{type:"checkbox",id:"genre-filter-".concat(t.name),name:t.name,onChange:n,checked:r}),a.a.createElement("div",{className:"genre-filter-item__text"},t.name)))}),I=Object(o.b)(function(e,t){return{checked:e.genreFilter.includes(t.genre.id)}},function(e,t){return{onClick:function(){e({type:"CHECKBOX_CLICKED",id:t.genre.id})}}})(F),k=(n(65),function(e){var t=e.genres;return a.a.createElement("div",{className:"genre-filter"},a.a.createElement("h2",{className:"genre-filter__heading"},"Genres"),a.a.createElement("ul",null,t&&t.map(function(e){return a.a.createElement(I,{key:e.id,genre:e})})))}),M=Object(o.b)(function(e){var t=w(e.movies,e.genreFilter,e.ratingFilter).map(function(e){return e.genre_ids}).reduce(function(e,t){return Object(s.a)(e).concat(Object(s.a)(t))},[]);return{genres:e.genres.filter(function(e){return t.includes(e.id)})}})(k),T=(n(67),Array.from(new Array(21).keys()).map(function(e){return e/2})),V=function(e){var t=e.current,n=e.onChange;return a.a.createElement("div",{className:"rating-filter"},a.a.createElement("h2",{className:"rating-filter__heading"},"Minimum rating"),a.a.createElement("select",{id:"rating-filter-dropdown",className:"rating-filter__select",value:t,name:"rating",onChange:function(e){return n(e.target.value)}},T.map(function(e){return a.a.createElement("option",{className:"rating-filter__option",key:e,value:e},"".concat(.5!==(t=e)?Math.floor(t):"").concat(t===Math.floor(t)?"":"\xbd"));var t})))},D=Object(o.b)(function(e){return{current:e.ratingFilter}},function(e){return{onChange:function(t){e(function(e){return{type:"RATING_CLICKED",rating:e}}(t))}}})(V),x=(n(69),function(e){var t=e.loadStatus,n=e.getMovies;return Object(r.useEffect)(function(){t||n()},[]),a.a.createElement("div",{className:"layout"},"SUCCESS"===t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"layout__sidebar"},a.a.createElement("div",{className:"layout__sidebar-inner"},a.a.createElement(M,null),a.a.createElement(D,null))),a.a.createElement(R,null)),"ERROR"===t&&a.a.createElement("div",{className:"layout__error"},"Sorry, we couldn't retrieve the movie data. Please reload the page or check your connection."),"LOADING"===t&&a.a.createElement("div",{className:"layout--loading"},a.a.createElement(O.a,{name:"ball-beat",color:"#bbb"})))}),A=n(5),H=n.n(A),G=n(7),K="f94a91209b8b99b37d7b9e3780b888fd",L=function(){var e="https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(K);return fetch(e).then(function(){var e=Object(G.a)(H.a.mark(function e(t){var n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},U=function(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(K);return fetch(e).then(function(){var e=Object(G.a)(H.a.mark(function e(t){var n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},B=function(){return function(){var e=Object(G.a)(H.a.mark(function e(t){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"FETCH_MOVIES_START"}),Promise.all([L().then(function(e){return t({type:"MOVIES_RECEIVED",movies:e})}),U().then(function(e){return t({type:"GENRES_RECEIVED",genres:e})})]).then(function(){t({type:"FETCH_MOVIES_SUCCESS"})}).catch(function(){t({type:"FETCH_MOVIES_ERROR"})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},J=Object(o.b)(function(e){return{loadStatus:e.fetchStatus.fetchMovies}},function(e){return{getMovies:function(){e(B())}}})(x),P=(n(73),_()),X=function(){return a.a.createElement(o.a,{store:P},a.a.createElement(J,null))};i.a.render(a.a.createElement(X,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.0fb20fcf.chunk.js.map